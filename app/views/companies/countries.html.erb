<%- model_class = Country -%>
<div class="page-header">
    <h1><%= @company.name %> Países asignados</h1>
</div>
<%= render :partial => 'companies_menu' %>
<div class="span10">

    <table class="table table-bordered table-striped table-hover" id="company_countries">
      <thead>
        <tr>
          <th><%= model_class.human_attribute_name(:id) %></th>
          <th>País</th>
          <th><%=t '.actions', :default => t("helpers.actions") %></th>
        </tr>
      </thead>
      <tbody>
        <% @countries.each do |country| %>
          <tr>
            <td><%=country.id %></td>
            <td><%= country.name%></td>
            <td>
              <%= link_to t('.destroy', :default => t("helpers.links.destroy")),"/companies/delete_country_from/#{@company.id}?country=#{country.id}", :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },:class => 'btn btn-mini btn-danger' %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

  <!-- Button to trigger modal -->
  <a href="#myModal" role="button" class="btn btn-primary" data-toggle="modal">Asignar País </a>
   
  <!-- Modal -->
  <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  <h3 id="myModalLabel">Asignar País</h3>
  </div>
  <div class="modal-body">
  <%= simple_form_for :new_company_country, :url => url_for("/companies/assing_country_to/#{@company.id}"),:method => 'post' do |f| %>
    <%= f.error_notification %>
    <div class="form-inputs">
      <input type="hidden" name="new_company_country[company_id]" id="new_company_country_company_id" value="<%=@company.id%>">
      <% if @company.countries.size > 0 %>
        <%= f.input :countries, collection: Country.find(:all, :conditions=>["id not in (?)",@company.countries.map(&:id)]), :label_method=>:name, :value_method=>:id,as: :check_boxes, label: 'Seleccione los que deséa asignar', include_blank: false %>
      <% else %>
        <%= f.input :countries, collection: Country.find(:all), :label_method=>:name, :value_method=>:id,as: :check_boxes, label: 'Seleccione los que deséa asignar', include_blank: false %>
      <% end %>
    </div>
    <div class="form-actions">
      <%= f.button :submit, "Asignar", :class=>"btn btn-info" %>
    </div>
  <% end %>
  </div>
  <div class="modal-footer">
  <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
  </div>

</div>